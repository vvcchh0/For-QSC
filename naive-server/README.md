# Naive Server

## 总述
说实在的, 不知道这个算不算偏题...

9月28日紧急放弃 ZJUam 转向这个项目.
考虑可支配的时间, 选用之前仅仅理论接触过的 Python Flask 框架进行我的第一个从0开始的服务器的搭建。
但是怎么说呢, 我在最后发现我完成的项目应属于网页应用, 而非后端服务器。碍于时间限制, 加上个人的 Web 基础真的可以说是 0 ,  以及个人刨根究底的思维习惯导致的初见时的理解能力较差, 目前尚不能完成后端服务器的搭建, 只能将能够做好的东西端上来了...
不论要求, 对我自己而言, 这第一次自主开发网络应用的经历还是挺顺利的。

## 过程
1. 重拾 Python Flask 相关知识, 从 Hello World 开始
2. 编写简单的 html
3. 重温 Flask render_template, redirect 等, 以及部分 SQL 语句
4. 一口气完成程序的编写, 调试 1-2 小时

## 评价
找回死去的记忆有种变年轻了的感觉[doge]
写代码的过程中感受到的本能式的激情(越来越上头)与曾经相差无几, 挺感动的
总的来说, 这次的程序搭建比较顺畅(除了完成 api 响应, 传输采用 json 的要求, 以及 token 相关)
--------插入: (参考了 ZJUam 开发的教训:我没有系统性地学习过 Web 开发的一些概念, 不理解相关术语; 查到的资料不成体系, 无法引导我理解)
最后调试的部分, log 功能的实现(同样时第一次做)极大地方便了我最后对代码错误的修正, 保护了我的血压.

## 实现的功能(题目要求)及自己理解的思路:
1. 测试网络连通性
   任取一个网络正常状态下能够快速访问的网站(如百度 www.baidu.com ), 利用 cmd 向网站发送请求
   os.system(u "{url}")
   若连接正常, 返回 0

2. 注册
   接收数据, 比对数据库中的记录, 有无相同的用户名: 若没有, 则将数据写入数据库, 以完成账号信息的保存, 完成注册

3. 登录
   接收数据m 比对数据库中的记录. 仅当用户名, 密码均与数据库中的记录一致时, 登录才算成功

4. 签到
   首先, 如果数据库中表 users 不存在记录签到情况的列, 则向 users 中插入列 checkin, 用以记录签到情况.
   checkin 赋初值 'None', 若不赋值, 则对于创建 checkin 前就已经存在的记录, 无法直接 update users set checkin='xxx' where xxx 更新数据, 这么做会报错.
   首次签到时, 修改 checkin 值为签到日期. 
   在账号已登录的情况下签到, 读取数据库中的记录, 比对 checkin 值与签到日期. 若一致, 则说明当天已经签到; 若不一致, 则修改 checkin 值为签到日期

5. Log 日志
   由于 Flask app 运行出错时返回的错误信息总是仅仅停留于运行异常这一表面现象, 记录程序错误时 Flask 返回的错误信息并不能有效帮助我们分析代码的问题.
   这可以通过在视图函数的结构中插入 try-except 结构解决(见 main.py), 这样, 错误产生的范围就从整个 app 转移到了单个视图函数, 错误信息也就指向了视图函数代码中具体的部位.
   有了错误信息后, 只需将错误产生的视图函数所属的 route , 错误信息写入本地的 log xxx.txt 即可. log 文件名中置入程序开始运行的时间, 以便区分不同运行时间时产生的 log .

## 自己尝试实现的功能:
1. 写 homepage 作为导航
2. 显示登录状态
3. 启动时直接在浏览器中打开对应页面

## 未能实现:
1. api 响应, 数据传输采用 json (真的查了好多资料了, 没能理解)
2. token

## 参考(只记了部分):
test_api.py
Python Flask https://www.bilibili.com/video/BV1DY4y1M7cS & 保留的一些高中的技术课文件
Python 测试网络连通性  https://blog.csdn.net/weixin_40449300/article/details/79193872 
Python Flask POST请求,发送与接受JSON https://blog.csdn.net/qq_42102546/article/details/130425504
Python requests 发送 json 格式数据 https://blog.csdn.net/weixin_41004350/article/details/78705415
Python os 获取当前路径 https://blog.csdn.net/liuweiyuxiang/article/details/88866527